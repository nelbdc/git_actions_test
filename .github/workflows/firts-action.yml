name: firts-worflow 
on: push
# se puede configurar varios on de la siguiente forma [push,workflow_dispatch,...]
jobs:
  fibonacci:
    runs-on: ubuntu-latest #obligatorio para todos los jobs que se creen
    steps:
      - name: Get code
        uses: actions/checkout@v3
      - name: Install python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
          cache: pip
      - name: Install Dependencies
        run: pip install -r ./requirements.txt
      - name: Run Test
        run: pytest ./fibonacci
  
  django-test:
    runs-on: ubuntu-latest
    needs: fibonacci
    steps:
      - name: Get Code
        uses: actions/checkout@v3
      - name: Install Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
          cache: pip
      - name: Install Dependencies
        run: pip install -r ./requirements.txt
      - name: Run Test
        run: pytest ./api
      
  deploy:
    needs: [fibonacci,django-test] # para decirle que necesita que termine primero este antes de seguir la ejecucion de este
    #para decirle que necesita de varios jobs se hace [test,test.,..]
    runs-on: ubuntu-latest
    steps:
      - name: Get code
        uses: actions/checkout@v3
      - name: Install python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
          cache: pip
      - name: Install Dependencies
        run: echo "instalando dependencia"
      - name: Deploying
        run: echo "deploy"

